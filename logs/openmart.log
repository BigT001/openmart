2025-06-13 13:39:57,917 - INFO - DeepSeek service initialized
2025-06-13 13:40:05,125 - ERROR - Instagram login failed: Login error: "fail" status, message "".
2025-06-13 13:40:05,126 - INFO - ScrapingService initialized
2025-06-13 14:12:29,341 - INFO - DeepSeek service initialized
2025-06-13 14:12:32,573 - ERROR - Instagram login failed: Login error: "fail" status, message "".
2025-06-13 14:12:32,573 - INFO - ScrapingService initialized
2025-06-13 14:17:57,227 - INFO - DeepSeek service initialized
2025-06-13 14:18:01,178 - ERROR - Instagram login failed: Login error: "fail" status, message "".
2025-06-13 14:18:01,178 - INFO - ScrapingService initialized
2025-06-13 14:18:01,178 - INFO - Processing prompt: black shirt under 30k
2025-06-13 14:18:01,239 - INFO - Making API call to DeepSeek with messages: [{'role': 'system', 'content': 'You are a smart shopping assistant that helps understand user shopping requests.\n        Extract structured information from the shopping query.\n        \n        Guidelines:\n        1. Price ranges should be exact numbers when specified\n        2. Product type should be specific but general enough for categorization\n        3. Specifications should include all important details\n        4. Consider Nigerian market context and currency (NGN/\u20a6)\n        \n        Always return a JSON object with the following fields:\n        {\n            "product_type": "string - Main product category or type",\n            "specifications": ["list of key features or requirements"],\n            "price_range": {\n                "minimum": float or null,\n                "maximum": float or null,\n                "target": float or null\n            },\n            "brands": ["list of mentioned brands"],\n            "colors": ["list of color preferences"],\n            "condition": "string - new/used/any",\n            "urgency": "string - delivery timing if mentioned",\n            "location": "string - location preferences if mentioned",\n            "style": "string - style preferences if mentioned",\n            "size": "string - size requirements if mentioned"\n        }\n        '}, {'role': 'user', 'content': 'black shirt under 30k'}]
2025-06-13 14:18:03,416 - ERROR - DeepSeek API error: Status 401, Response: {"error":{"message":"Authentication Fails, Your api key: ****5741 is invalid","type":"authentication_error","param":null,"code":"invalid_request_error"}}
2025-06-13 14:18:03,417 - ERROR - Error calling DeepSeek API: DeepSeek API error: {"error":{"message":"Authentication Fails, Your api key: ****5741 is invalid","type":"authentication_error","param":null,"code":"invalid_request_error"}}
2025-06-13 14:18:03,433 - ERROR - Error in process_prompt: DeepSeek API error: {"error":{"message":"Authentication Fails, Your api key: ****5741 is invalid","type":"authentication_error","param":null,"code":"invalid_request_error"}}
2025-06-13 14:20:04,262 - INFO - DeepSeek service initialized
2025-06-13 14:20:11,497 - ERROR - Instagram login failed: Login error: "fail" status, message "".
2025-06-13 14:20:11,498 - INFO - ScrapingService initialized
2025-06-13 14:20:11,498 - INFO - Processing prompt: black shirt under 30k
2025-06-13 14:20:11,498 - INFO - Making API call to DeepSeek with messages: [{'role': 'system', 'content': 'You are a smart shopping assistant that helps understand user shopping requests.\n        Extract structured information from the shopping query.\n        \n        Guidelines:\n        1. Price ranges should be exact numbers when specified\n        2. Product type should be specific but general enough for categorization\n        3. Specifications should include all important details\n        4. Consider Nigerian market context and currency (NGN/\u20a6)\n        \n        Always return a JSON object with the following fields:\n        {\n            "product_type": "string - Main product category or type",\n            "specifications": ["list of key features or requirements"],\n            "price_range": {\n                "minimum": float or null,\n                "maximum": float or null,\n                "target": float or null\n            },\n            "brands": ["list of mentioned brands"],\n            "colors": ["list of color preferences"],\n            "condition": "string - new/used/any",\n            "urgency": "string - delivery timing if mentioned",\n            "location": "string - location preferences if mentioned",\n            "style": "string - style preferences if mentioned",\n            "size": "string - size requirements if mentioned"\n        }\n        '}, {'role': 'user', 'content': 'black shirt under 30k'}]
2025-06-13 14:20:12,210 - ERROR - DeepSeek API error: Status 401, Response: {"error":{"message":"Authentication Fails, Your api key: ****5741 is invalid","type":"authentication_error","param":null,"code":"invalid_request_error"}}
2025-06-13 14:20:12,210 - ERROR - Error calling DeepSeek API: DeepSeek API error: {"error":{"message":"Authentication Fails, Your api key: ****5741 is invalid","type":"authentication_error","param":null,"code":"invalid_request_error"}}
2025-06-13 14:20:12,211 - ERROR - Error in process_prompt: DeepSeek API error: {"error":{"message":"Authentication Fails, Your api key: ****5741 is invalid","type":"authentication_error","param":null,"code":"invalid_request_error"}}
2025-06-13 14:52:49,107 - INFO - DeepSeek service initialized with model: deepseek-r1-distill-qwen-32b:free
2025-06-13 14:52:52,056 - ERROR - Instagram login failed: Login error: "fail" status, message "".
2025-06-13 14:52:52,057 - INFO - ScrapingService initialized
2025-06-13 14:53:47,480 - INFO - DeepSeek service initialized with model: deepseek-r1-distill-qwen-32b:free
2025-06-13 14:53:51,714 - ERROR - Instagram login failed: Login error: "fail" status, message "".
2025-06-13 14:53:51,715 - INFO - ScrapingService initialized
2025-06-13 14:53:51,715 - INFO - Processing prompt: black shirt under 30k
2025-06-13 14:53:51,715 - INFO - Making API call to OpenRouter with model: deepseek-r1-distill-qwen-32b:free
2025-06-13 14:53:52,436 - ERROR - OpenRouter API error: Status 401, Response: {"error":{"message":"No auth credentials found","code":401}}
2025-06-13 14:53:52,436 - ERROR - Error calling OpenRouter API: OpenRouter API error: {"error":{"message":"No auth credentials found","code":401}}
2025-06-13 14:53:52,438 - ERROR - Error in process_prompt: OpenRouter API error: {"error":{"message":"No auth credentials found","code":401}}
2025-06-13 15:13:04,157 - INFO - Registering API routes...
2025-06-13 15:13:04,161 - INFO - \u2705 Successfully registered search router
2025-06-13 15:13:04,161 - INFO - \u2705 Successfully registered products router
2025-06-13 15:14:32,760 - INFO - Registering API routes...
2025-06-13 15:14:32,763 - INFO - \u2705 Successfully registered search router
2025-06-13 15:14:32,768 - INFO - \u2705 Successfully registered products router
2025-06-13 15:16:16,368 - INFO - DeepSeek service initialized with model: deepseek-r1-distill-qwen-32b:free
2025-06-13 15:16:16,368 - INFO - Initializing ScrapingService...
2025-06-13 15:16:16,369 - INFO - Attempting Instagram login with username: smmmm_mmmy
2025-06-13 15:16:21,297 - ERROR - \u274c Instagram login failed: Login error: "fail" status, message "".
2025-06-13 15:16:21,297 - ERROR - Please check your Instagram credentials in .env file
2025-06-13 15:16:21,298 - INFO - ScrapingService initialization completed
2025-06-13 15:37:20,177 - INFO - DeepSeek service initialized with model: deepseek-r1-distill-qwen-32b:free
2025-06-13 15:37:20,177 - INFO - Initializing ScrapingService...
2025-06-13 15:37:20,178 - INFO - Attempting Instagram login with username: smmmm_mmmy
2025-06-13 15:37:23,731 - ERROR - \u274c Instagram login failed: Login error: "fail" status, message "".
2025-06-13 15:37:23,731 - ERROR - Please check your Instagram credentials in .env file
2025-06-13 15:37:23,731 - INFO - ScrapingService initialization completed
2025-06-13 15:37:23,731 - INFO - Processing prompt: red sweater 
2025-06-13 15:37:23,731 - INFO - Making API call to OpenRouter with model: deepseek-r1-distill-qwen-32b:free
2025-06-13 15:37:24,406 - ERROR - OpenRouter API error: Status 401, Response: {"error":{"message":"No auth credentials found","code":401}}
2025-06-13 15:37:24,406 - ERROR - Error calling OpenRouter API: OpenRouter API error: {"error":{"message":"No auth credentials found","code":401}}
2025-06-13 15:37:24,408 - ERROR - Error in process_prompt: OpenRouter API error: {"error":{"message":"No auth credentials found","code":401}}
2025-06-21 19:14:08,695 - INFO - DeepSeek service initialized with model: deepseek-r1-distill-qwen-32b:free
2025-06-21 19:14:08,695 - INFO - Initializing ScrapingService...
2025-06-21 19:14:09,134 - INFO - Creating new collection: products
2025-06-21 19:14:09,282 - INFO - VectorStore initialized successfully
2025-06-21 19:14:09,282 - INFO - \u2705 Successfully initialized VectorStore
2025-06-21 19:14:09,296 - WARNING - \u26a0\ufe0f No Instagram credentials provided in .env file
2025-06-21 19:14:09,296 - INFO - ScrapingService initialization completed
2025-06-21 19:14:09,296 - INFO - Processing prompt: iPhone 13 under 500K
2025-06-21 19:14:09,297 - INFO - Making API call to OpenRouter with model: deepseek-r1-distill-qwen-32b:free
2025-06-21 19:14:10,353 - ERROR - OpenRouter API error: Status 401, Response: {"error":{"message":"No auth credentials found","code":401}}
2025-06-21 19:14:10,354 - ERROR - Error calling OpenRouter API: OpenRouter API error: {"error":{"message":"No auth credentials found","code":401}}
2025-06-21 19:14:10,357 - ERROR - Error in process_prompt: OpenRouter API error: {"error":{"message":"No auth credentials found","code":401}}
2025-06-21 20:13:04,888 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2c9d4372-da58-4b13-aad2-a92a4aedd407'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2c9d4372-da58-4b13-aad2-a92a4aedd407'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:13:26,784 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2c9d4372-da58-4b13-aad2-a92a4aedd407'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2c9d4372-da58-4b13-aad2-a92a4aedd407'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:14:40,339 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:15:25,078 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:25:18,006 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:27:00,399 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:27:15,201 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:27:51,718 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:30:33,925 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:31:28,893 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=info.samuelstanley%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:32:01,043 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=info.samuelstanley%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:32:08,951 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=info.samuelstanley%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:32:14,449 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=info.samuelstanley%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:33:16,150 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:39:13,220 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:39:25,871 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2c9d4372-da58-4b13-aad2-a92a4aedd407'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2c9d4372-da58-4b13-aad2-a92a4aedd407'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:39:32,949 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=mischievouscatlab%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('b7c88a33-95da-4b66-8b79-a7697168707a'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('b7c88a33-95da-4b66-8b79-a7697168707a'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:39:47,594 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=mischievouscatlab%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('b7c88a33-95da-4b66-8b79-a7697168707a'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('b7c88a33-95da-4b66-8b79-a7697168707a'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:40:07,873 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=info.samuelstanley%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:40:07,904 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=info.samuelstanley%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:40:25,587 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=info.samuelstanley%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 55, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('de8f8cd6-d86f-4bce-a635-7507d0ba6540'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 20:40:47,658 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 20:50:28,097 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:05:23,691 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:06:10,199 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:10:43,376 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:11:22,591 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:11:36,410 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:13:08,661 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:16:18,255 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:18:34,354 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:20:37,013 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:22:43,433 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:23:10,441 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 46, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:25:49,540 - INFO - Received vendor onboarding request: {'business_name': 'very', 'business_category': 'Fashion', 'business_email': 'd86584859@gmail.com', 'business_phone': '08098756755', 'business_address': 'you logos streeys', 'store_description': '[Window Title]\nVisual Studio Code\n\n[Main Instruction]\nAre you sure you want to paste 13 lines of text into the terminal?\n\n[Content]\nPreview:\npage.tsx:44 \n POST http://localhost:8000/ap\nhandleSubmit\t@\tpage.tsx:44\n\n\n[ ] Do not ask me again  [Paste] [Paste as one line] [Cancel]', 'full_name': 'divboy', 'email': 'd86584859@gmail.com', 'personal_phone': '08098756755'}
2025-06-21 21:25:49,573 - INFO - User lookup for email d86584859@gmail.com: FOUND
2025-06-21 21:25:49,581 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:25:49,613 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:28:35,685 - INFO - Received vendor onboarding request: {'business_name': 'very', 'business_category': 'Fashion', 'business_email': 'd86584859@gmail.com', 'business_phone': '08098756755', 'business_address': 'you logos streeys', 'store_description': "Access to fetch at 'http://localhost:8000/api/vendors/onboard' from origin 'http://localhost:3000' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.Understand this error\npage.tsx:44 \n            \n            \n           POST http://localhost:8000/api/vendors/onboard net::ERR_FAILED 500 (Internal Server Error)\nhandleSubmit @ page.tsx:44\nexecuteDispatch @ react-dom-client.development.js:16501\nrunWithFiberInDEV @ react-dom-client.development.js:844\nprocessDispatchQueue @ react-dom-client.development.js:16551\n(anonymous) @ react-dom-client.development.js:17149\nbatchedUpdates$1 @ react-dom-client.development.js:3262\ndispatchEventForPluginEventSystem @ react-dom-client.development.js:16705\ndispatchEvent @ react-dom-client.development.js:20815\ndispatchDiscreteEvent @ react-dom-client.development.js:20783Understand this error\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\nreport-hmr-latency.ts:26 [Fast Refresh] done in 189ms", 'full_name': 'divboy', 'email': 'd86584859@gmail.com', 'personal_phone': '08098756755'}
2025-06-21 21:28:35,688 - INFO - User lookup for email d86584859@gmail.com: FOUND
2025-06-21 21:28:35,692 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:28:35,716 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:32:04,460 - INFO - Received vendor onboarding request: {'business_name': 'very', 'business_category': 'Fashion', 'business_email': 'd86584859@gmail.com', 'business_phone': '08098756755', 'business_address': 'you logos streeys', 'store_description': '    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n2025-06-21 21:28:35,685 - INFO - Received vendor onboarding request: {\'business_name\': \'very\', \'business_category\': \'Fashion\', \'business_email\': \'d86584859@gmail.com\', \'business_phone\': \'08098756755\', \'business_address\': \'you logos streeys\', \'store_description\': "Access to fetch at \'http://localhost:8000/api/vendors/onboard\' from origin \'http://localhost:3000\' has been blocked by CORS policy: No \'Access-Control-Allow-Origin\' header is present on the requested resource.Understand this error\\npage.tsx:44 \\n            \\n            \\n           POST http://localhost:8000/api/vendors/onboard net::ERR_FAILED 500 (Internal Server Error)\\nhandleSubmit @ page.tsx:44\\nexecuteDispatch @ react-dom-client.development.js:16501\\nrunWithFiberInDEV @ react-dom-client.development.js:844\\nprocessDispatchQueue @ react-dom-client.development.js:16551\\n(anonymous) @ react-dom-client.development.js:17149\\nbatchedUpdates$1 @ react-dom-client.development.js:3262\\ndispatchEventForPluginEventSystem @ react-dom-client.development.js:16705\\ndispatchEvent @ react-dom-client.development.js:20815\\ndispatchDiscreteEvent @ react-dom-client.development.js:20783Understand this error\\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\\nreport-hmr-latency.ts:26 [Fast Refresh] done in 189ms", \'full_name\': \'divboy\', \'email\': \'d86584859@gmail.com\', \'personal_phone\': \'08098756755\'}\n2025-06-21 21:28:35,688 - INFO - User lookup for email d86584859@gmail.com: FOUND\n2025-06-21 21:28:35,692 - ERROR - Error in onboard_vendor: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\api\\routes\\vendors.py", line 50, in onboard_vendor\n    db.commit()\n    ~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 2032, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File "<string>", line 2, in commit\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1313, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "<string>", line 2, in _prepare_impl\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1288, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4345, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4480, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4441, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py", line 76, in save_obj\n    for table, mapper in base_mapper._sorted_tables.items():\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4060, in _sorted_tables\n    sorted_ = sql_util.sort_tables(\n        table_to_mapper,\n        skip_fn=skip,\n        extra_dependencies=extra_dependencies,\n    )\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1316, in sort_tables\n    for (t, fkcs) in sort_tables_and_constraints(\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        tables,\n        ^^^^^^^\n    ...<2 lines>...\n        _warn_for_cycles=True,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1386, in sort_tables_and_constraints\n    filtered = filter_fn(fkc)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1306, in _skip_fn\n    if fixed_skip_fn(fk):\n       ~~~~~~~~~~~~~^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4043, in skip\n    dep = table_to_mapper.get(fk.column.table)\n                              ^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1226, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3199, in column\n    return self._resolve_column()\n           ~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3222, in _resolve_column\n    raise exc.NoReferencedTableError(\n    ...<5 lines>...\n    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n2025-06-21 21:28:35,716 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 148, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\streams\\memory.py", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\main.py", line 43, in error_handling\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 156, in call_next\n    raise app_exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 141, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\cors.py", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\cors.py", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 53, in wrapped_app\n    raise exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 714, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 734, in app\n    await route.handle(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 288, in handle\n    await self.app(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 76, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 53, in wrapped_app\n    raise exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 73, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\fastapi\\routing.py", line 301, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\fastapi\\routing.py", line 214, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\concurrency.py", line 37, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\to_thread.py", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py", line 2470, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py", line 967, in run\n    result = context.run(func, *args)\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\api\\routes\\vendors.py", line 50, in onboard_vendor\n    db.commit()\n    ~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 2032, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File "<string>", line 2, in commit\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1313, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "<string>", line 2, in _prepare_impl\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1288, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4345, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4480, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4441, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py", line 76, in save_obj\n    for table, mapper in base_mapper._sorted_tables.items():\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4060, in _sorted_tables\n    sorted_ = sql_util.sort_tables(\n        table_to_mapper,\n        skip_fn=skip,\n        extra_dependencies=extra_dependencies,\n    )\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1316, in sort_tables\n    for (t, fkcs) in sort_tables_and_constraints(\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        tables,\n        ^^^^^^^\n    ...<2 lines>...\n        _warn_for_cycles=True,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1386, in sort_tables_and_constraints\n    filtered = filter_fn(fkc)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1306, in _skip_fn\n    if fixed_skip_fn(fk):\n       ~~~~~~~~~~~~~^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4043, in skip\n    dep = table_to_mapper.get(fk.column.table)\n                              ^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1226, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3199, in column\n    return self._resolve_column()\n           ~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3222, in _resolve_column\n    raise exc.NoReferencedTableError(\n    ...<5 lines>...\n    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n', 'full_name': 'divboy', 'email': 'd86584859@gmail.com', 'personal_phone': '08098756755'}
2025-06-21 21:32:04,470 - INFO - User lookup for email d86584859@gmail.com: FOUND
2025-06-21 21:32:04,478 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:32:04,512 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:33:44,724 - INFO - Received vendor onboarding request: {'business_name': 'very', 'business_category': 'Fashion', 'business_email': 'd86584859@gmail.com', 'business_phone': '08098756755', 'business_address': 'you logos streeys', 'store_description': '    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n2025-06-21 21:28:35,685 - INFO - Received vendor onboarding request: {\'business_name\': \'very\', \'business_category\': \'Fashion\', \'business_email\': \'d86584859@gmail.com\', \'business_phone\': \'08098756755\', \'business_address\': \'you logos streeys\', \'store_description\': "Access to fetch at \'http://localhost:8000/api/vendors/onboard\' from origin \'http://localhost:3000\' has been blocked by CORS policy: No \'Access-Control-Allow-Origin\' header is present on the requested resource.Understand this error\\npage.tsx:44 \\n            \\n            \\n           POST http://localhost:8000/api/vendors/onboard net::ERR_FAILED 500 (Internal Server Error)\\nhandleSubmit @ page.tsx:44\\nexecuteDispatch @ react-dom-client.development.js:16501\\nrunWithFiberInDEV @ react-dom-client.development.js:844\\nprocessDispatchQueue @ react-dom-client.development.js:16551\\n(anonymous) @ react-dom-client.development.js:17149\\nbatchedUpdates$1 @ react-dom-client.development.js:3262\\ndispatchEventForPluginEventSystem @ react-dom-client.development.js:16705\\ndispatchEvent @ react-dom-client.development.js:20815\\ndispatchDiscreteEvent @ react-dom-client.development.js:20783Understand this error\\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\\nreport-hmr-latency.ts:26 [Fast Refresh] done in 189ms", \'full_name\': \'divboy\', \'email\': \'d86584859@gmail.com\', \'personal_phone\': \'08098756755\'}\n2025-06-21 21:28:35,688 - INFO - User lookup for email d86584859@gmail.com: FOUND\n2025-06-21 21:28:35,692 - ERROR - Error in onboard_vendor: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\api\\routes\\vendors.py", line 50, in onboard_vendor\n    db.commit()\n    ~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 2032, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File "<string>", line 2, in commit\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1313, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "<string>", line 2, in _prepare_impl\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1288, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4345, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4480, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4441, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py", line 76, in save_obj\n    for table, mapper in base_mapper._sorted_tables.items():\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4060, in _sorted_tables\n    sorted_ = sql_util.sort_tables(\n        table_to_mapper,\n        skip_fn=skip,\n        extra_dependencies=extra_dependencies,\n    )\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1316, in sort_tables\n    for (t, fkcs) in sort_tables_and_constraints(\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        tables,\n        ^^^^^^^\n    ...<2 lines>...\n        _warn_for_cycles=True,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1386, in sort_tables_and_constraints\n    filtered = filter_fn(fkc)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1306, in _skip_fn\n    if fixed_skip_fn(fk):\n       ~~~~~~~~~~~~~^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4043, in skip\n    dep = table_to_mapper.get(fk.column.table)\n                              ^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1226, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3199, in column\n    return self._resolve_column()\n           ~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3222, in _resolve_column\n    raise exc.NoReferencedTableError(\n    ...<5 lines>...\n    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n2025-06-21 21:28:35,716 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 148, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\streams\\memory.py", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\main.py", line 43, in error_handling\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 156, in call_next\n    raise app_exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 141, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\cors.py", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\cors.py", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 53, in wrapped_app\n    raise exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 714, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 734, in app\n    await route.handle(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 288, in handle\n    await self.app(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 76, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 53, in wrapped_app\n    raise exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 73, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\fastapi\\routing.py", line 301, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\fastapi\\routing.py", line 214, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\concurrency.py", line 37, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\to_thread.py", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py", line 2470, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py", line 967, in run\n    result = context.run(func, *args)\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\api\\routes\\vendors.py", line 50, in onboard_vendor\n    db.commit()\n    ~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 2032, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File "<string>", line 2, in commit\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1313, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "<string>", line 2, in _prepare_impl\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1288, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4345, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4480, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4441, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py", line 76, in save_obj\n    for table, mapper in base_mapper._sorted_tables.items():\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4060, in _sorted_tables\n    sorted_ = sql_util.sort_tables(\n        table_to_mapper,\n        skip_fn=skip,\n        extra_dependencies=extra_dependencies,\n    )\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1316, in sort_tables\n    for (t, fkcs) in sort_tables_and_constraints(\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        tables,\n        ^^^^^^^\n    ...<2 lines>...\n        _warn_for_cycles=True,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1386, in sort_tables_and_constraints\n    filtered = filter_fn(fkc)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1306, in _skip_fn\n    if fixed_skip_fn(fk):\n       ~~~~~~~~~~~~~^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4043, in skip\n    dep = table_to_mapper.get(fk.column.table)\n                              ^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1226, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3199, in column\n    return self._resolve_column()\n           ~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3222, in _resolve_column\n    raise exc.NoReferencedTableError(\n    ...<5 lines>...\n    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n', 'full_name': 'divboy', 'email': 'd86584859@gmail.com', 'personal_phone': '08098756755'}
2025-06-21 21:33:44,727 - INFO - User lookup for email d86584859@gmail.com: FOUND
2025-06-21 21:33:44,728 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:33:44,737 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:51:43,828 - INFO - Received vendor onboarding request: {'business_name': 'very', 'business_category': 'Fashion', 'business_email': 'd86584859@gmail.com', 'business_phone': '08098756755', 'business_address': 'you logos streeys', 'store_description': '    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n2025-06-21 21:28:35,685 - INFO - Received vendor onboarding request: {\'business_name\': \'very\', \'business_category\': \'Fashion\', \'business_email\': \'d86584859@gmail.com\', \'business_phone\': \'08098756755\', \'business_address\': \'you logos streeys\', \'store_description\': "Access to fetch at \'http://localhost:8000/api/vendors/onboard\' from origin \'http://localhost:3000\' has been blocked by CORS policy: No \'Access-Control-Allow-Origin\' header is present on the requested resource.Understand this error\\npage.tsx:44 \\n            \\n            \\n           POST http://localhost:8000/api/vendors/onboard net::ERR_FAILED 500 (Internal Server Error)\\nhandleSubmit @ page.tsx:44\\nexecuteDispatch @ react-dom-client.development.js:16501\\nrunWithFiberInDEV @ react-dom-client.development.js:844\\nprocessDispatchQueue @ react-dom-client.development.js:16551\\n(anonymous) @ react-dom-client.development.js:17149\\nbatchedUpdates$1 @ react-dom-client.development.js:3262\\ndispatchEventForPluginEventSystem @ react-dom-client.development.js:16705\\ndispatchEvent @ react-dom-client.development.js:20815\\ndispatchDiscreteEvent @ react-dom-client.development.js:20783Understand this error\\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\\nreport-hmr-latency.ts:26 [Fast Refresh] done in 189ms", \'full_name\': \'divboy\', \'email\': \'d86584859@gmail.com\', \'personal_phone\': \'08098756755\'}\n2025-06-21 21:28:35,688 - INFO - User lookup for email d86584859@gmail.com: FOUND\n2025-06-21 21:28:35,692 - ERROR - Error in onboard_vendor: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\api\\routes\\vendors.py", line 50, in onboard_vendor\n    db.commit()\n    ~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 2032, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File "<string>", line 2, in commit\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1313, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "<string>", line 2, in _prepare_impl\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1288, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4345, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4480, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4441, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py", line 76, in save_obj\n    for table, mapper in base_mapper._sorted_tables.items():\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4060, in _sorted_tables\n    sorted_ = sql_util.sort_tables(\n        table_to_mapper,\n        skip_fn=skip,\n        extra_dependencies=extra_dependencies,\n    )\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1316, in sort_tables\n    for (t, fkcs) in sort_tables_and_constraints(\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        tables,\n        ^^^^^^^\n    ...<2 lines>...\n        _warn_for_cycles=True,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1386, in sort_tables_and_constraints\n    filtered = filter_fn(fkc)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1306, in _skip_fn\n    if fixed_skip_fn(fk):\n       ~~~~~~~~~~~~~^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4043, in skip\n    dep = table_to_mapper.get(fk.column.table)\n                              ^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1226, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3199, in column\n    return self._resolve_column()\n           ~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3222, in _resolve_column\n    raise exc.NoReferencedTableError(\n    ...<5 lines>...\n    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n2025-06-21 21:28:35,716 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 148, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\streams\\memory.py", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\main.py", line 43, in error_handling\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 156, in call_next\n    raise app_exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\base.py", line 141, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\cors.py", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\cors.py", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 53, in wrapped_app\n    raise exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 714, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 734, in app\n    await route.handle(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 288, in handle\n    await self.app(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 76, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 53, in wrapped_app\n    raise exc\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\routing.py", line 73, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\fastapi\\routing.py", line 301, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\fastapi\\routing.py", line 214, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\starlette\\concurrency.py", line 37, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\to_thread.py", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py", line 2470, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py", line 967, in run\n    result = context.run(func, *args)\n  File "C:\\Users\\hp\\Desktop\\openmart\\app\\api\\routes\\vendors.py", line 50, in onboard_vendor\n    db.commit()\n    ~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 2032, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File "<string>", line 2, in commit\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1313, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "<string>", line 2, in _prepare_impl\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 1288, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4345, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4480, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py", line 4441, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py", line 76, in save_obj\n    for table, mapper in base_mapper._sorted_tables.items():\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1338, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4060, in _sorted_tables\n    sorted_ = sql_util.sort_tables(\n        table_to_mapper,\n        skip_fn=skip,\n        extra_dependencies=extra_dependencies,\n    )\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1316, in sort_tables\n    for (t, fkcs) in sort_tables_and_constraints(\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        tables,\n        ^^^^^^^\n    ...<2 lines>...\n        _warn_for_cycles=True,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1386, in sort_tables_and_constraints\n    filtered = filter_fn(fkc)\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\ddl.py", line 1306, in _skip_fn\n    if fixed_skip_fn(fk):\n       ~~~~~~~~~~~~~^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\mapper.py", line 4043, in skip\n    dep = table_to_mapper.get(fk.column.table)\n                              ^^^^^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py", line 1226, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n                                           ~~~~~~~~~^^^^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3199, in column\n    return self._resolve_column()\n           ~~~~~~~~~~~~~~~~~~~~^^\n  File "C:\\Users\\hp\\Desktop\\openmart\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\schema.py", line 3222, in _resolve_column\n    raise exc.NoReferencedTableError(\n    ...<5 lines>...\n    )\nsqlalchemy.exc.NoReferencedTableError: Foreign key associated with column \'vendors.user_id\' could not find table \'users\' with which to generate a foreign key to target column \'id\'\n', 'full_name': 'divboy', 'email': 'd86584859@gmail.com', 'personal_phone': '08098756755'}
2025-06-21 21:51:43,834 - INFO - User lookup for email d86584859@gmail.com: FOUND
2025-06-21 21:51:43,838 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:51:43,874 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:52:54,159 - INFO - Received vendor onboarding request: {'business_name': 'very', 'business_category': 'Electronics', 'business_email': 'd86584859@gmail.com', 'business_phone': '08098756755', 'business_address': 'you logos streeys', 'store_description': 'Ok now, could it be that the details we have in our database PGAdmin for Defender does not match what is being provided in the onboarding form? Could that be the reason why? If that is the reason why, can we drop some tables in our database so that it matches exactly what is in the onboarding form? Can we do that?', 'full_name': 'divboy', 'email': 'd86584859@gmail.com', 'personal_phone': '08098756755'}
2025-06-21 21:52:54,163 - INFO - User lookup for email d86584859@gmail.com: FOUND
2025-06-21 21:52:54,169 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 21:52:54,189 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 22:02:55,478 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_category': 'Fashion', 'business_email': 'stasam149@gmail.com', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'store_description': 'stasam149@gmail.com', 'full_name': 'sam sta', 'email': 'stasam149@gmail.com', 'personal_phone': '09056475'}
2025-06-21 22:02:55,537 - INFO - User lookup for email stasam149@gmail.com: FOUND
2025-06-21 22:02:55,539 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 22:02:55,550 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 22:06:47,895 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_category': 'Fashion', 'business_email': 'stasam149@gmail.com', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'store_description': 'stasam149@gmail.com', 'full_name': 'sam sta', 'email': 'stasam149@gmail.com', 'personal_phone': '09056475'}
2025-06-21 22:06:47,899 - INFO - User lookup for email stasam149@gmail.com: FOUND
2025-06-21 22:06:47,901 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 22:06:47,915 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 22:07:15,225 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_category': 'Fashion', 'business_email': 'stasam149@gmail.com', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'store_description': "Access to fetch at 'http://localhost:8000/api/vendors/onboard' from origin 'http://localhost:3000' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.Understand this error\npage.tsx:44 \n            \n            \n           POST http://localhost:8000/api/vendors/onboard net::ERR_FAILED 500 (Internal Server Error)\nhandleSubmit @ page.tsx:44\nexecuteDispatch @ react-dom-client.development.js:16501\nrunWithFiberInDEV @ react-dom-client.development.js:844\nprocessDispatchQueue @ react-dom-client.development.js:16551\n(anonymous) @ react-dom-client.development.js:17149\nbatchedUpdates$1 @ react-dom-client.development.js:3262\ndispatchEventForPluginEventSystem @ react-dom-client.development.js:16705\ndispatchEvent @ react-dom-client.development.js:20815\ndispatchDiscreteEvent @ react-dom-client.development.js:20783Understand this error", 'full_name': 'sam sta', 'email': 'stasam149@gmail.com', 'personal_phone': '09056475'}
2025-06-21 22:07:15,227 - INFO - User lookup for email stasam149@gmail.com: FOUND
2025-06-21 22:07:15,228 - ERROR - Error in onboard_vendor: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 22:07:15,236 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 50, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-21 22:31:48,639 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:31:49,008 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:32:34,271 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:32:49,541 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:32:57,988 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:32:58,189 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:33:04,745 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:33:16,967 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:33:56,046 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:33:56,432 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:33:57,463 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:33:58,281 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:34:13,398 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 63, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.logo_url AS vendors_logo_url, vendors.cover_image_url AS vendors_cover_image_url, vendors.business_email AS vendors_business_email, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.registration_number AS vendors_registration_number, vendors.verification_status AS vendors_verification_status, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.bank_name AS vendors_bank_name, vendors.bank_account_number AS vendors_bank_account_number, vendors.bank_account_name AS vendors_bank_account_name, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:38:25,538 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 58, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:38:28,693 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=stasam149%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 58, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('c8a1778d-c4a3-4b01-8475-9d1989f2fd79'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:38:42,471 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 58, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:38:52,531 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 58, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:40:32,389 - ERROR - Request to http://localhost:8000/api/vendors/by-user?email=d86584859%40gmail.com failed: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "vendors" does not exist
LINE 2: FROM vendors 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 58, in get_vendor_by_user
    vendor = db.query(vendor_model.Vendor).filter(vendor_model.Vendor.user_id == user.id).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "vendors" does not exist
LINE 2: FROM vendors 
             ^

[SQL: SELECT vendors.id AS vendors_id, vendors.user_id AS vendors_user_id, vendors.business_name AS vendors_business_name, vendors.business_description AS vendors_business_description, vendors.business_phone AS vendors_business_phone, vendors.business_address AS vendors_business_address, vendors.rating AS vendors_rating, vendors.total_reviews AS vendors_total_reviews, vendors.category AS vendors_category, vendors.created_at AS vendors_created_at, vendors.updated_at AS vendors_updated_at 
FROM vendors 
WHERE vendors.user_id = %(user_id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'user_id_1': UUID('2d14371a-a759-416f-a3a7-3412d62c7a0d'), 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-21 22:52:24,965 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_description': 'alembic upgrade head\n(.venv) PS C:\\Users\\hp\\Desktop\\openmart> alembic upgrade head\nINFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\nINFO  [alembic.runtime.migration] Will assume transactional DDL.\nINFO  [alembic.runtime.migration] Running upgrade  -> 20250621_create_users_table\nINFO  [alembic.runtime.migration] Running upgrade 20250621_create_users_table -> 20250621_cre\nate_vendors_table, Alembic migration script to create the vendors table.                     ', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Fashion'}
2025-06-21 22:52:24,972 - INFO - User lookup for email None: NOT FOUND
2025-06-21 22:52:24,973 - WARNING - User not found for email: None
2025-06-21 22:52:24,974 - ERROR - Error in onboard_vendor: 404: User not found
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 35, in onboard_vendor
    raise HTTPException(status_code=404, detail="User not found")
fastapi.exceptions.HTTPException: 404: User not found
2025-06-21 22:53:52,844 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_description': 'alembic upgrade head\n(.venv) PS C:\\Users\\hp\\Desktop\\openmart> alembic upgrade head\nINFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\nINFO  [alembic.runtime.migration] Will assume transactional DDL.\nINFO  [alembic.runtime.migration] Running upgrade  -> 20250621_create_users_table\nINFO  [alembic.runtime.migration] Running upgrade 20250621_create_users_table -> 20250621_cre\nate_vendors_table, Alembic migration script to create the vendors table.                     ', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Food'}
2025-06-21 22:53:52,851 - INFO - User lookup for email None: NOT FOUND
2025-06-21 22:53:52,851 - WARNING - User not found for email: None
2025-06-21 22:53:52,852 - ERROR - Error in onboard_vendor: 404: User not found
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 35, in onboard_vendor
    raise HTTPException(status_code=404, detail="User not found")
fastapi.exceptions.HTTPException: 404: User not found
2025-06-21 22:58:31,997 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_description': 'Failed to load resource: the server responded with a status of 404 (Not Found)Understand this error\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\nreport-hmr-latency.ts:26 [Fast Refresh] done in 220ms\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\nreport-hmr-latency.ts:26 [Fast Refresh] done in 137ms', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Food'}
2025-06-21 22:58:31,999 - INFO - User lookup for email None: NOT FOUND
2025-06-21 22:58:31,999 - WARNING - User not found for email: None
2025-06-21 22:58:31,999 - ERROR - Error in onboard_vendor: 404: User not found
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 35, in onboard_vendor
    raise HTTPException(status_code=404, detail="User not found")
fastapi.exceptions.HTTPException: 404: User not found
2025-06-21 22:58:41,427 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_description': 'Failed to load resource: the server responded with a status of 404 (Not Found)Understand this error\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\nreport-hmr-latency.ts:26 [Fast Refresh] done in 220ms\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\nreport-hmr-latency.ts:26 [Fast Refresh] done in 137ms', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Food'}
2025-06-21 22:58:41,431 - INFO - User lookup for email None: NOT FOUND
2025-06-21 22:58:41,431 - WARNING - User not found for email: None
2025-06-21 22:58:41,432 - ERROR - Error in onboard_vendor: 404: User not found
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 35, in onboard_vendor
    raise HTTPException(status_code=404, detail="User not found")
fastapi.exceptions.HTTPException: 404: User not found
2025-06-21 23:08:48,979 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_description': 'Failed to load resource: the server responded with a status of 404 (Not Found)Understand this error\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\nreport-hmr-latency.ts:26 [Fast Refresh] done in 220ms\nturbopack-hot-reloader-common.ts:41 [Fast Refresh] rebuilding\nreport-hmr-latency.ts:26 [Fast Refresh] done in 137ms', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Food'}
2025-06-21 23:08:48,984 - INFO - User lookup for email None: NOT FOUND
2025-06-21 23:08:48,984 - WARNING - User not found for email: None
2025-06-21 23:08:48,985 - ERROR - Error in onboard_vendor: 404: User not found
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 35, in onboard_vendor
    raise HTTPException(status_code=404, detail="User not found")
fastapi.exceptions.HTTPException: 404: User not found
2025-06-21 23:09:05,125 - INFO - Received vendor onboarding request: {'business_name': 'you', 'business_description': '@router.post("/vendors/onboard")', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Fashion'}
2025-06-21 23:09:05,127 - INFO - User lookup for email None: NOT FOUND
2025-06-21 23:09:05,127 - WARNING - User not found for email: None
2025-06-21 23:09:05,127 - ERROR - Error in onboard_vendor: 404: User not found
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 35, in onboard_vendor
    raise HTTPException(status_code=404, detail="User not found")
fastapi.exceptions.HTTPException: 404: User not found
2025-06-21 23:11:30,048 - INFO - [ONBOARD_VENDOR] Endpoint called. Payload: {'business_name': 'you', 'business_description': 'page.tsx:40 \n POST http://localhost:8000/api/vendors/onboard 404 (Not Found)\nhandleSubmit\t@\tpage.tsx:40\n<form>\t\t\nVendorOnboardingPage\t@\tpage.tsx:58\n', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Food'}
2025-06-21 23:11:30,054 - INFO - [ONBOARD_VENDOR] User lookup for email None: NOT FOUND
2025-06-21 23:11:30,055 - WARNING - [ONBOARD_VENDOR] User not found for email: None
2025-06-21 23:11:30,056 - ERROR - [ONBOARD_VENDOR] Error: 404: User not found
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 36, in onboard_vendor
    raise HTTPException(status_code=404, detail="User not found")
fastapi.exceptions.HTTPException: 404: User not found
2025-06-22 02:16:02,116 - INFO - [ONBOARD_VENDOR] Endpoint called. Payload: {'business_name': 'very', 'business_description': 'page.tsx:40 \n POST http://localhost:8000/api/vendors/onboard 404 (Not Found)\nhandleSubmit\t@\tpage.tsx:40\n<form>\t\t\nVendorOnboardingPage\t@\tpage.tsx:58\n', 'business_phone': '08098756755', 'business_address': 'you logos streeys', 'category': 'Food'}
2025-06-22 02:16:02,120 - INFO - [ONBOARD_VENDOR] User lookup for email None: NOT FOUND
2025-06-22 02:16:02,120 - WARNING - [ONBOARD_VENDOR] User not found for email: None
2025-06-22 02:16:02,120 - ERROR - [ONBOARD_VENDOR] Error: 404: User not found
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 36, in onboard_vendor
    raise HTTPException(status_code=404, detail="User not found")
fastapi.exceptions.HTTPException: 404: User not found
2025-06-22 02:27:59,479 - INFO - [ONBOARD_VENDOR] Endpoint called. Payload: {'email': 'stasam149@gmail.com', 'business_name': 'you', 'business_description': 'make this change for you in both the backend and frontend?', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Electronics'}
2025-06-22 02:27:59,484 - INFO - [ONBOARD_VENDOR] User lookup for email stasam149@gmail.com: FOUND
2025-06-22 02:27:59,484 - ERROR - [ONBOARD_VENDOR] Error: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 47, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-22 02:28:00,001 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 47, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-22 02:28:05,925 - INFO - [ONBOARD_VENDOR] Endpoint called. Payload: {'email': 'stasam149@gmail.com', 'business_name': 'you', 'business_description': 'make this change for you in both the backend and frontend?', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Electronics'}
2025-06-22 02:28:05,927 - INFO - [ONBOARD_VENDOR] User lookup for email stasam149@gmail.com: FOUND
2025-06-22 02:28:05,928 - ERROR - [ONBOARD_VENDOR] Error: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 47, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-22 02:28:05,939 - ERROR - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 43, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 47, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-22 02:48:10,108 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 02:48:13,962 - DEBUG - openmart - Registering search router
2025-06-22 02:50:13,023 - DEBUG - openmart - Registering search router
2025-06-22 02:50:51,647 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 02:50:51,649 - DEBUG - openmart - Registering search router
2025-06-22 02:50:51,651 - DEBUG - openmart - Registering products router
2025-06-22 02:50:51,653 - DEBUG - openmart - Registering users router
2025-06-22 02:50:51,656 - DEBUG - openmart - Registering vendors router
2025-06-22 02:52:13,823 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 02:52:13,826 - DEBUG - openmart - Registering search router
2025-06-22 02:52:13,827 - DEBUG - openmart - Registering products router
2025-06-22 02:52:13,828 - DEBUG - openmart - Registering users router
2025-06-22 02:52:13,830 - DEBUG - openmart - Registering vendors router
2025-06-22 03:09:06,702 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 03:09:06,705 - DEBUG - openmart - Registering search router
2025-06-22 03:09:06,706 - DEBUG - openmart - Registering products router
2025-06-22 03:09:06,708 - DEBUG - openmart - Registering users router
2025-06-22 03:09:06,711 - DEBUG - openmart - Registering vendors router
2025-06-22 03:14:19,107 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 03:14:19,121 - DEBUG - openmart - Registering search router
2025-06-22 03:14:19,142 - DEBUG - openmart - Registering products router
2025-06-22 03:14:19,154 - DEBUG - openmart - Registering users router
2025-06-22 03:14:19,172 - DEBUG - openmart - Registering vendors router
2025-06-22 03:14:49,792 - INFO - openmart.vendors - [ONBOARD_VENDOR] Endpoint called. Payload: {'email': 'stasam149@gmail.com', 'business_name': 'you', 'business_description': 'PS C:\\Users\\hp\\Desktop\\openmart>  .\\.venv\\Scripts\\Activate.ps1;\n(.venv) PS C:\\Users\\hp\\Desktop\\openmart> alembic downgrade base; alembic upgrade head        \nINFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\nINFO  [alembic.runtime.migration] Will assume transactional DDL.\nINFO  [alembic.runtime.migration] Running downgrade 20250621_create_vendors_table -> 20250621_create_users_table, Alembic migration script to create the vendors table.\nINFO  [alembic.runtime.migration] Running downgrade 20250621_create_users_table -> \nINFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\nINFO  [alembic.runtime.migration] Will assume transactional DDL.\nINFO  [alembic.runtime.migration] Running upgrade  -> 20250621_create_users_table\nINFO  [alembic.runtime.migration] Running upgrade 20250621_create_users_table -> 20250621_create_vendors_table, Alembic migration script to create the vendors table.\n(.venv) PS C:\\Users\\hp\\Desktop\\openmart> ', 'business_phone': '09056475', 'business_address': 'stasam149@gmail.com', 'category': 'Electronics'}
2025-06-22 03:14:49,801 - INFO - openmart.vendors - [ONBOARD_VENDOR] User lookup for email stasam149@gmail.com: FOUND
2025-06-22 03:14:49,805 - ERROR - openmart.vendors - [ONBOARD_VENDOR] Error: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 47, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-22 03:14:49,842 - ERROR - openmart - Request to http://localhost:8000/api/vendors/onboard failed: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 47, in onboard_vendor
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'vendors.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-06-22 03:39:25,610 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 03:39:25,612 - DEBUG - openmart - Registering search router
2025-06-22 03:39:25,614 - DEBUG - openmart - Registering products router
2025-06-22 03:39:25,617 - DEBUG - openmart - Registering users router
2025-06-22 03:39:25,618 - DEBUG - openmart - Registering vendors router
2025-06-22 03:39:40,995 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 03:39:40,998 - DEBUG - openmart - Registering search router
2025-06-22 03:39:41,000 - DEBUG - openmart - Registering products router
2025-06-22 03:39:41,001 - DEBUG - openmart - Registering users router
2025-06-22 03:39:41,003 - DEBUG - openmart - Registering vendors router
2025-06-22 03:39:57,301 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 03:39:57,305 - DEBUG - openmart - Registering search router
2025-06-22 03:39:57,306 - DEBUG - openmart - Registering products router
2025-06-22 03:39:57,309 - DEBUG - openmart - Registering users router
2025-06-22 03:39:57,311 - DEBUG - openmart - Registering vendors router
2025-06-22 03:42:13,702 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 03:42:20,365 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 03:46:05,640 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 03:46:05,643 - DEBUG - openmart - Registering search router
2025-06-22 03:46:05,644 - DEBUG - openmart - Registering products router
2025-06-22 03:46:05,645 - DEBUG - openmart - Registering users router
2025-06-22 03:46:05,647 - DEBUG - openmart - Registering vendors router
2025-06-22 03:57:03,893 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 03:57:03,897 - DEBUG - openmart - Registering search router
2025-06-22 03:57:03,899 - DEBUG - openmart - Registering products router
2025-06-22 03:57:03,902 - DEBUG - openmart - Registering users router
2025-06-22 03:57:03,905 - DEBUG - openmart - Registering vendors router
2025-06-22 04:13:15,592 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:13:28,832 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:20:48,168 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:21:32,350 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:28:54,193 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:33:47,391 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 04:33:47,397 - DEBUG - openmart - Registering search router
2025-06-22 04:33:47,398 - DEBUG - openmart - Registering products router
2025-06-22 04:33:47,399 - DEBUG - openmart - Registering users router
2025-06-22 04:33:47,400 - DEBUG - openmart - Registering vendors router
2025-06-22 04:35:26,278 - INFO - openmart.vendors - VENDORS ROUTER LOADED: /vendors/onboard endpoint should be active.
2025-06-22 04:35:26,282 - DEBUG - openmart - Registering search router
2025-06-22 04:35:26,285 - DEBUG - openmart - Registering products router
2025-06-22 04:35:26,288 - DEBUG - openmart - Registering users router
2025-06-22 04:35:26,289 - DEBUG - openmart - Registering vendors router
2025-06-22 04:35:51,236 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:36:07,308 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:36:18,542 - INFO - openmart.vendors - [ONBOARD_VENDOR] Endpoint called. Payload: {'email': 'd86584859@gmail.com', 'business_name': 'very', 'business_description': 'update your Vendor model to match the migration script?', 'business_phone': '08098756755', 'business_address': 'you logos streeys', 'category': 'Home & Living'}
2025-06-22 04:36:18,546 - ERROR - openmart.vendors - [ONBOARD_VENDOR] Error: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 33, in onboard_vendor
    user = db.query(User).filter(User.email == payload.email).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:36:18,581 - ERROR - openmart - Request to http://localhost:8000/api/vendors/onboard failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\vendors.py", line 33, in onboard_vendor
    user = db.query(User).filter(User.email == payload.email).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:36:30,837 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:38:14,897 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:38:15,321 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:39:16,133 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:39:16,368 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:39:28,104 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '102517827201839588984', 'email_1': 'd86584859@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-06-22 04:41:37,332 - ERROR - openmart - Request to http://localhost:8000/api/users/google-login failed: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\hp\Desktop\openmart\app\main.py", line 36, in error_handling
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "C:\Users\hp\Desktop\openmart\app\api\routes\users.py", line 28, in google_login
    user = upsert_user(db, email=payload.email, full_name=payload.full_name, avatar_url=payload.avatar_url, google_id=payload.google_id)
  File "C:\Users\hp\Desktop\openmart\app\crud\user.py", line 9, in upsert_user
    user = db.query(User).filter((User.google_id == google_id) | (User.email == email)).first()
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\Desktop\openmart\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.google_id AS users_google_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.google_id = %(google_id_1)s OR users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'google_id_1': '109048330684621484627', 'email_1': 'stasam149@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
